{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\kesav\\\\Downloads\\\\TheShoeShop-main\\\\TheShoeShop-main\\\\frontend\\\\src\\\\components\\\\Products\\\\ProductID\\\\RatingReview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport axios from \"axios\";\nimport { TextField, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button, Chip, Popover } from \"@material-ui/core\";\nimport RateReviewIcon from \"@material-ui/icons/RateReview\";\nimport RatingAll from \"./RatingAll\";\n\nconst RatingReview = ({\n  productId,\n  product,\n  user\n}) => {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [review, setReview] = useState({\n    review: \"\",\n    rating: 0,\n    products: productId\n  });\n  const [error, setError] = useState(null);\n  const [headers, setHeaders] = useState({\n    auth_token: `${localStorage.getItem(\"UserToken\")}`\n  });\n\n  const handleText = e => {\n    setReview({ ...review,\n      review: e.target.value\n    });\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    setHeaders({\n      auth_token: `${localStorage.getItem(\"UserToken\")}`\n    });\n  }, [user]);\n\n  const addReview = () => {\n    axios.post(` https://lit-thicket-99427.herokuapp.com/api/products/addreview`, review, {\n      headers: headers\n    }).then(res => {\n      if (res.status === 400) {\n        console.log(\"err\");\n      } else {\n        handleClose();\n        window.location.reload();\n      }\n    }).catch(error => {\n      setError(error.response.request.response);\n    });\n  };\n\n  useEffect(() => {\n    if (!product.reviews.length) {\n      setRating(0);\n    } else if (product.reviews.length === 1) {\n      setRating(product.reviews[0].rating);\n    } else {\n      const calculate = product.reviews.reduce((a, b) => {\n        return (a.rating + b.rating) / product.reviews.length;\n      });\n      setRating(calculate);\n    }\n  }, [product]);\n  const [rating, setRating] = useState(0);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClosePopOver = () => {\n    setAnchorEl(null);\n  };\n\n  const openPop = Boolean(anchorEl);\n  const id = openPop ? \"simple-popover\" : undefined;\n\n  if (user.name === null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignContent: \"center\",\n          display: \"flex\"\n        },\n        children: [\" \", /*#__PURE__*/_jsxDEV(Rating, {\n          value: rating,\n          name: \"simple-controlled\",\n          readOnly: true,\n          precision: 0.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"(\", rating, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          variant: \"outlined\",\n          color: \"primary\",\n          size: \"small\",\n          label: `Total ${product.reviews.length} reviews / New review`,\n          onClick: handleClickOpen,\n          icon: /*#__PURE__*/_jsxDEV(RateReviewIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 19\n          }, this),\n          style: {\n            marginLeft: \"10px\",\n            padding: \"5px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: open,\n        onClose: handleClose,\n        \"aria-labelledby\": \"form-dialog-title\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          id: \"form-dialog-title\",\n          children: \"Reviews\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignContent: \"center\",\n            margin: \"0 auto\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n            children: \"All reviews for this product .\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(RatingAll, {\n            reviews: product\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleClose,\n            color: \"primary\",\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            \"aria-describedby\": id,\n            color: \"primary\",\n            onClick: handleClick,\n            children: \"Review it!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Popover, {\n            id: id,\n            open: openPop,\n            anchorEl: anchorEl,\n            onClose: handleClosePopOver,\n            anchorOrigin: {\n              vertical: \"bottom\",\n              horizontal: \"center\"\n            },\n            transformOrigin: {\n              vertical: \"top\",\n              horizontal: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                padding: \"10px\",\n                color: \"red\"\n              },\n              children: \"Please log in to Review it!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        alignContent: \"center\",\n        display: \"flex\"\n      },\n      children: [\" \", /*#__PURE__*/_jsxDEV(Rating, {\n        value: rating,\n        name: \"simple-controlled\",\n        readOnly: true,\n        precision: 0.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"(\", rating, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Chip, {\n        variant: \"outlined\",\n        color: \"primary\",\n        size: \"small\",\n        label: `Total ${product.reviews.length} reviews / New review`,\n        onClick: handleClickOpen,\n        icon: /*#__PURE__*/_jsxDEV(RateReviewIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this),\n        style: {\n          marginLeft: \"10px\",\n          padding: \"5px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"form-dialog-title\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"form-dialog-title\",\n        children: \"Reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignContent: \"center\",\n          margin: \"0 auto\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: \"All reviews for this product .\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RatingAll, {\n          reviews: product\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"outlined-multiline-static\",\n          label: \"Review\",\n          multiline: true,\n          rows: 4,\n          name: \"review\",\n          value: review.review,\n          onChange: handleText,\n          variant: \"outlined\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            margin: \"0 auto\"\n          },\n          children: \"Rate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          style: {\n            margin: \"0 auto\"\n          },\n          value: review.rating,\n          name: \"simple-controlled\",\n          onChange: (event, newValue) => {\n            setReview({ ...review,\n              rating: newValue\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleClose,\n          color: \"primary\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: addReview,\n          color: \"primary\",\n          variant: \"contained\",\n          style: {\n            backgroundColor: \"#ffc107\",\n            color: \"black\",\n            padding: \"5px\"\n          },\n          children: \"Send Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RatingReview, \"ABeBxycZg0q5S/LmTDMdhF566yI=\");\n\n_c = RatingReview;\nexport default RatingReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"RatingReview\");","map":{"version":3,"sources":["C:/Users/kesav/Downloads/TheShoeShop-main/TheShoeShop-main/frontend/src/components/Products/ProductID/RatingReview.js"],"names":["React","useState","useEffect","Rating","axios","TextField","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","Chip","Popover","RateReviewIcon","RatingAll","RatingReview","productId","product","user","open","setOpen","review","setReview","rating","products","error","setError","headers","setHeaders","auth_token","localStorage","getItem","handleText","e","target","value","handleClickOpen","handleClose","addReview","post","then","res","status","console","log","window","location","reload","catch","response","request","reviews","length","setRating","calculate","reduce","a","b","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClosePopOver","openPop","Boolean","id","undefined","name","alignContent","display","marginLeft","padding","flexDirection","justifyContent","margin","vertical","horizontal","color","newValue","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport axios from \"axios\";\nimport {\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Chip,\n  Popover,\n} from \"@material-ui/core\";\nimport RateReviewIcon from \"@material-ui/icons/RateReview\";\nimport RatingAll from \"./RatingAll\";\n\nconst RatingReview = ({ productId, product, user }) => {\n  const [open, setOpen] = useState(false);\n  const [review, setReview] = useState({\n    review: \"\",\n    rating: 0,\n    products: productId,\n  });\n  const [error, setError] = useState(null);\n  const [headers, setHeaders] = useState({\n    auth_token: `${localStorage.getItem(\"UserToken\")}`,\n  });\n\n  const handleText = (e) => {\n    setReview({ ...review, review: e.target.value });\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  useEffect(() => {\n    setHeaders({ auth_token: `${localStorage.getItem(\"UserToken\")}` });\n  }, [user]);\n  const addReview = () => {\n    axios\n      .post(\n        ` https://lit-thicket-99427.herokuapp.com/api/products/addreview`,\n\n        review,\n        {\n          headers: headers,\n        }\n      )\n\n      .then((res) => {\n        if (res.status === 400) {\n          console.log(\"err\");\n        } else {\n          handleClose();\n          window.location.reload();\n        }\n      })\n      .catch((error) => {\n        setError(error.response.request.response);\n      });\n  };\n  useEffect(() => {\n    if (!product.reviews.length) {\n      setRating(0);\n    } else if (product.reviews.length === 1) {\n      setRating(product.reviews[0].rating);\n    } else {\n      const calculate = product.reviews.reduce((a, b) => {\n        return (a.rating + b.rating) / product.reviews.length;\n      });\n\n      setRating(calculate);\n    }\n  }, [product]);\n\n  const [rating, setRating] = useState(0);\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClosePopOver = () => {\n    setAnchorEl(null);\n  };\n\n  const openPop = Boolean(anchorEl);\n  const id = openPop ? \"simple-popover\" : undefined;\n  if (user.name === null) {\n    return (\n      <div>\n        <div\n          style={{\n            alignContent: \"center\",\n\n            display: \"flex\",\n          }}\n        >\n          {\" \"}\n          <Rating\n            value={rating}\n            name=\"simple-controlled\"\n            readOnly\n            precision={0.5}\n          />\n          <span>({rating})</span>\n          <Chip\n            variant=\"outlined\"\n            color=\"primary\"\n            size=\"small\"\n            label={`Total ${product.reviews.length} reviews / New review`}\n            onClick={handleClickOpen}\n            icon={<RateReviewIcon />}\n            style={{ marginLeft: \"10px\", padding: \"5px\" }}\n          />\n        </div>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Reviews</DialogTitle>\n          <DialogContent\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n              alignContent: \"center\",\n              margin: \"0 auto\",\n            }}\n          >\n            <DialogContentText>\n              All reviews for this product .\n            </DialogContentText>\n            <RatingAll reviews={product} />\n          </DialogContent>\n\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              Close\n            </Button>\n            <Button aria-describedby={id} color=\"primary\" onClick={handleClick}>\n              Review it!\n            </Button>\n            <Popover\n              id={id}\n              open={openPop}\n              anchorEl={anchorEl}\n              onClose={handleClosePopOver}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <p style={{ padding: \"10px\", color: \"red\" }}>\n                Please log in to Review it!\n              </p>\n            </Popover>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <div\n        style={{\n          alignContent: \"center\",\n\n          display: \"flex\",\n        }}\n      >\n        {\" \"}\n        <Rating\n          value={rating}\n          name=\"simple-controlled\"\n          readOnly\n          precision={0.5}\n        />\n        <span>({rating})</span>\n        <Chip\n          variant=\"outlined\"\n          color=\"primary\"\n          size=\"small\"\n          label={`Total ${product.reviews.length} reviews / New review`}\n          onClick={handleClickOpen}\n          icon={<RateReviewIcon />}\n          style={{ marginLeft: \"10px\", padding: \"5px\" }}\n        />\n      </div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Reviews</DialogTitle>\n        <DialogContent\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignContent: \"center\",\n            margin: \"0 auto\",\n          }}\n        >\n          <DialogContentText>All reviews for this product .</DialogContentText>\n          <RatingAll reviews={product} />\n          <TextField\n            id=\"outlined-multiline-static\"\n            label=\"Review\"\n            multiline\n            rows={4}\n            name=\"review\"\n            value={review.review}\n            onChange={handleText}\n            variant=\"outlined\"\n          />\n          <span\n            style={{\n              margin: \"0 auto\",\n            }}\n          >\n            Rate\n          </span>\n          <Rating\n            style={{\n              margin: \"0 auto\",\n            }}\n            value={review.rating}\n            name=\"simple-controlled\"\n            onChange={(event, newValue) => {\n              setReview({ ...review, rating: newValue });\n            }}\n          />\n          {error && <span style={{ color: \"red\" }}>{error}</span>}\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n          <Button\n            onClick={addReview}\n            color=\"primary\"\n            variant=\"contained\"\n            style={{\n              backgroundColor: \"#ffc107\",\n              color: \"black\",\n              padding: \"5px\",\n            }}\n          >\n            Send Review\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default RatingReview;\n"]},"metadata":{},"sourceType":"module"}