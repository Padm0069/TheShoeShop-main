{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\kesav\\\\Downloads\\\\TheShoeShop-main\\\\TheShoeShop-main\\\\frontend\\\\src\\\\components\\\\User\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { MyContext } from \"../../Context/Context\";\nimport { USER_LOGIN } from \"../../Context/reducers\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Button, TextField, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, makeStyles } from \"@material-ui/core/\";\nconst windowCheck = window.screen.width;\nconst useStyles = makeStyles({\n  loginbtn: {\n    borderRadius: \"25px\",\n    fontSize: windowCheck < 420 ? \"10px\" : \"13px\",\n    padding: \"5px 10px\",\n    marginRight: \"5px\",\n    backgroundColor: \"#ffc107\",\n    \"&:hover\": {\n      backgroundColor: \"#ffac33\"\n    }\n  }\n});\n\nconst Login = props => {\n  _s();\n\n  const history = useHistory();\n  const location = useLocation();\n  const {\n    dispatch\n  } = useContext(MyContext);\n  const classes = useStyles();\n  const [user, setUser] = useState({\n    name: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(null);\n\n  const handleOnChange = e => {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const LogIn = async e => {\n    e.preventDefault();\n    await axios.post(` https://lit-thicket-99427.herokuapp.com/api/user/login`, user).then(res => {\n      if (res.status === 400) {\n        console.log(\"err\");\n      } else {\n        localStorage.setItem(\"UserToken\", res.data.token);\n        localStorage.setItem(\"User\", res.data.user);\n        localStorage.setItem(\"UserID\", res.data.userID);\n        dispatch({\n          type: USER_LOGIN,\n          token: res.data.token,\n          user: {\n            name: res.data.user,\n            id: res.data.userID,\n            adress: res.data.adress\n          }\n        });\n        setError(null);\n        props.handleClose();\n\n        if (location.state && location.state.from) {\n          history.replace(location.state.from.pathname);\n        } else if (location.pathname === \"/login\") {\n          history.replace(\"/\");\n        } else if (location.pathname) {\n          history.replace(location.pathname);\n        } // else go to home\n        else {\n            history.replace(\"/\");\n          }\n      }\n    }).catch(error => {\n      setError(error.response.request.response);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: props.openLogin,\n    onClose: props.handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: LogIn,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"form-dialog-title\",\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: \"Please write your username and password to log in.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          margin: \"dense\",\n          id: \"name\",\n          name: \"name\",\n          label: \"Name\",\n          type: \"name\",\n          fullWidth: true,\n          onChange: handleOnChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          margin: \"dense\",\n          id: \"password\",\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          fullWidth: true,\n          onChange: handleOnChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgotpassword\",\n          onClick: props.handleClose,\n          style: {\n            textDecoration: \"none\",\n            color: \"black\",\n            margin: \"5px\",\n            fontSize: windowCheck < 420 ? \"11px\" : \"15px\"\n          },\n          className: classes.forgotpassword,\n          children: \"Forgot Password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: props.handleClose,\n          color: \"primary\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: classes.loginbtn,\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: \"center\",\n            color: \"red\",\n            fontWeight: \"400\"\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"C0+L7dxftLlQ9D5ZcolUh7xcDIg=\", false, function () {\n  return [useHistory, useLocation, useStyles];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/kesav/Downloads/TheShoeShop-main/TheShoeShop-main/frontend/src/components/User/Login.js"],"names":["React","useState","useContext","MyContext","USER_LOGIN","Link","useHistory","useLocation","axios","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","makeStyles","windowCheck","window","screen","width","useStyles","loginbtn","borderRadius","fontSize","padding","marginRight","backgroundColor","Login","props","history","location","dispatch","classes","user","setUser","name","password","error","setError","handleOnChange","e","target","value","LogIn","preventDefault","post","then","res","status","console","log","localStorage","setItem","data","token","userID","type","id","adress","handleClose","state","from","replace","pathname","catch","response","request","openLogin","textDecoration","color","margin","forgotpassword","textAlign","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { MyContext } from \"../../Context/Context\";\nimport { USER_LOGIN } from \"../../Context/reducers\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n} from \"@material-ui/core/\";\nconst windowCheck = window.screen.width;\nconst useStyles = makeStyles({\n  loginbtn: {\n    borderRadius: \"25px\",\n    fontSize: windowCheck < 420 ? \"10px\" : \"13px\",\n    padding: \"5px 10px\",\n    marginRight: \"5px\",\n    backgroundColor: \"#ffc107\",\n    \"&:hover\": {\n      backgroundColor: \"#ffac33\",\n    },\n  },\n});\n\nconst Login = (props) => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const { dispatch } = useContext(MyContext);\n  const classes = useStyles();\n  const [user, setUser] = useState({ name: \"\", password: \"\" });\n  const [error, setError] = useState(null);\n  const handleOnChange = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  const LogIn = async (e) => {\n    e.preventDefault();\n    await axios\n      .post(` https://lit-thicket-99427.herokuapp.com/api/user/login`, user)\n\n      .then((res) => {\n        if (res.status === 400) {\n          console.log(\"err\");\n        } else {\n          localStorage.setItem(\"UserToken\", res.data.token);\n          localStorage.setItem(\"User\", res.data.user);\n          localStorage.setItem(\"UserID\", res.data.userID);\n\n          dispatch({\n            type: USER_LOGIN,\n            token: res.data.token,\n            user: {\n              name: res.data.user,\n              id: res.data.userID,\n              adress: res.data.adress,\n            },\n          });\n          setError(null);\n          props.handleClose();\n\n          if (location.state && location.state.from) {\n            history.replace(location.state.from.pathname);\n          } else if (location.pathname === \"/login\") {\n            history.replace(\"/\");\n          } else if (location.pathname) {\n            history.replace(location.pathname);\n          }\n          // else go to home\n          else {\n            history.replace(\"/\");\n          }\n        }\n      })\n      .catch((error) => {\n        setError(error.response.request.response);\n      });\n  };\n\n  return (\n    <Dialog\n      open={props.openLogin}\n      onClose={props.handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <form onSubmit={LogIn}>\n        <DialogTitle id=\"form-dialog-title\">Log in</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Please write your username and password to log in.\n          </DialogContentText>\n\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            name=\"name\"\n            label=\"Name\"\n            type=\"name\"\n            fullWidth\n            onChange={handleOnChange}\n          />\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onChange={handleOnChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Link\n            to=\"/forgotpassword\"\n            onClick={props.handleClose}\n            style={{\n              textDecoration: \"none\",\n              color: \"black\",\n              margin: \"5px\",\n              fontSize: windowCheck < 420 ? \"11px\" : \"15px\",\n            }}\n            className={classes.forgotpassword}\n          >\n            Forgot Password?\n          </Link>\n          <Button onClick={props.handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button type=\"submit\" className={classes.loginbtn}>\n            Sign in\n          </Button>\n        </DialogActions>\n\n        {error && (\n          <div>\n            <p style={{ textAlign: \"center\", color: \"red\", fontWeight: \"400\" }}>\n              {error}\n            </p>\n          </div>\n        )}\n      </form>\n    </Dialog>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}